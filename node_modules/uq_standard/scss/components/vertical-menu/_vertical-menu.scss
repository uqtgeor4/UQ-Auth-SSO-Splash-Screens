// Vertical menu.
// For side menus on page.
// Includes Drupal fugly classes.
//
// Variants:
// .vertical-menu--shaded - Adds a grey bg to the menu and tweaks hover/active states.

.vertical-menu {
  clear: both;
  margin-bottom: 2.5rem;

  .vertical-menu__title, .block-title {
    font-size: 1.475rem;
    margin: 0;
    padding: 0;
  }

  .menu {
    margin: 0;
    padding: 0;

    .menu__item,
    li {
      list-style: none;
      margin: 0;
      padding: 0;

      .menu__link,
      a {
        border-bottom: 1px solid $vertical-menu-link-border;
        display: block;
        padding: .8rem 0;
        position: relative;
        text-decoration: none;
        width: 100%;

        @media #{$large-up} {
          transition: ease border, padding .15s;
          transition-delay: .15s;
        }

        &:hover {
          @media #{$large-up} {
            border-left: 3px solid $link-color;
            padding-left: .5rem;
          }
        }

        &.active {
          color: $vertical-menu-link-active;
          font-weight: 400;
        }
      }
      // Dropdown link for mobile to show children.
      .menu__dropdown-link {
        display: none;
      }

      // Parent collapsed.
      &.collapsed,
      &.expanded {
        > a {
          padding-right: 1rem;

          // Arrow right to indicate closed parent.
          &::after {
            @include fa-icon;
            content: $fa-var-angle-right;
            font-size: .875rem;
            position: absolute;
            right: 0;
            top: 1.0625rem;
          }
        }
      }
      // Parent expanded.
      &.expanded {
        > a.active-trail {
          padding-right: 1rem;

          // Arrow down to indicate open parent.
          &::after {
            @include fa-icon;
            content: $fa-var-angle-down;
            font-size: .875rem;
            position: absolute;
            right: 0;
            top: 1.0625rem;
          }
        }

        &.active-trail {
          > .menu__dropdown {
            display: block;
          }
        }
      }
    }

    // Second level.
    .menu,
    .menu__dropdown {
      display: none;
      padding-left: 1rem;

      // Third level - Only show 2 levels at a time. Navigation follows user
      // down each level.
      .menu__dropdown {
        display: none;
      }
    }
  }

  // Shaded variant.
  &--shaded {
    .menu {
      border-top: 2px solid tint($uq-purple, 60);

      .menu__item,
      li {
        .menu__link,
        a {
          background-color: $vertical-menu-shaded-bg-color;
          border-bottom-color: #fff;
          color: #000;
          padding: .8rem 1.2rem;

          &:hover {
            background-color: darken($vertical-menu-shaded-bg-color, 5);
            border-left: 0;
            padding-left: 1.2rem;
          }

          &.active {
            background-color: darken($vertical-menu-shaded-bg-color, 5);
          }
        }

        &.collapsed,
        &.expanded {
          > a,
          > a.active-trail {
            &::after {
              right: 1.2rem;
            }
          }
        }

        &.expanded {
          li.active-trail {
            a {
              background-color: lighten($vertical-menu-shaded-bg-color, 1);
            }
          }

          .menu__dropdown {
            padding-left: 0;
            > li {
              > a {
                padding-left: 1.6rem;
              }

              > .menu__dropdown {
                > li {
                  > a {
                    padding-left: 2rem;
                  }
                }
              }
            }
          }
        }
      }
    }
  }
}
