// Accordion / Toggle style
//
// Can be used on either div or ul
//
// Variants:
// .accordion--shaded - Adds a shaded colour to the toggle titles.
// .accordion--no-bottom-border - Removes border from the bottom of accordions
//                                for use in menus (see compendium).
// .accordion--no-bottom-spacing - Removes margin from below accordions for use
//                                 in menus (see compendium).

.accordion {
  border-bottom: 1px solid $accordion-border-color;
  list-style: none;
  margin-bottom: 1.5em;
  overflow: hidden;
  padding: 0;

  // Accordion item.
  &__item {
    border-top: 1px solid $accordion-border-color;
  }

  // Accordion title / toggle.
  &__toggle {
    background: $accordion-content-bg;
    cursor: pointer;
    font-size: 1.2rem;
    font-weight: 400;
    margin: 0;
    padding: 1.1rem 2rem 1.2rem 0;
    position: relative;
    transition: all ease .2s;

    @media #{$medium-up} {
      font-size: 1.5rem;
      padding: 1.1rem 3rem 1.2rem 1rem;
    }

    // Closed state.
    &::before {
      @include uq-icon(add-circle);
      color: $accordion-icon-color;
      float: right;
      font-size: 1.2rem;
      font-weight: 100;
      margin-right: -2rem;
      margin-top: .1rem;

      @media #{$medium-up} {
        margin-top: .3rem;
      }
    }

    &:hover {
      background-color: $accordion-title-bg;
    }

    // Active toggle.
    &--active {
      background: $accordion-content-bg;

      // Open state.
      &::before {
        @include uq-icon(minus-circle);
        font-size: 1.2rem;
        font-weight: 100;
      }

      &:hover {
        background-color: $accordion-content-bg;
      }
    }
  }

  // Accordion content.
  &__content {
    display: none;
    overflow: hidden;
    padding: 0;
    word-wrap: break-word;

    @media #{$medium-up} {
      padding: 0 1em;
    }

    .content {
      // Ensure floated content is wrapped properly and doesn't overflow.
      display: inline-block;
      width: 100%;
    }

    // Active content.
    &--active {
      display: block;
      // Allows edit cog menu to overflow small accordions.
      overflow: visible !important;
    }

    p:first-of-type {
      margin-top: 0;
    }
  }

  // Shaded variant.
  &--shaded {
    .accordion {
      &__toggle {
        background: $accordion-title-bg;
        border-bottom: 1px solid $compendium-border-color;

        &:hover {
          background-color: $accordion-title-bg-hover;
        }

        &--active {
          background: $accordion-content-bg;
        }
      }
    }
  }

  // No bottom border variant.
  &--no-bottom-border {
    border-bottom: 0;
  }

  // No bottom spacing variant.
  &--no-bottom-spacing {
    margin-bottom: 0;
  }

  // Small toggle variant.
  &--secondary {
    .accordion {
      &__toggle {
        font-size: 1.1rem;

        @media #{$medium-up} {
          font-size: 1.2rem;
        }
      }
    }
  }

  // Contextual link region cog position fix.
  .contextual-links-wrapper {
    top: 0 !important;
  }
}

// Overrides for when displayed within wysiwyg fields.
.cke_editable {
  .accordion__content {
    border: 1px dashed $accordion-editor-outline;
    display: block !important;
  }
}
