// Progression
// A stepped progression indicator used across pages to show progress through a large process.


.progression {
  clear:both;
  display: -ms-flexbox;      /* TWEENER - IE 10 */
  display: flex;
  list-style: none;
  margin: 0 1.5625rem 0;
  padding: 0;

  // Each step in the progression bar.
  &__step {
    display: -ms-flexbox;      /* TWEENER - IE 10 */
    display: flex;
    -ms-flex: auto;              /* IE 10 */
    flex: auto;
    list-style: none;
    margin: 0;
    padding: 0;
  }

  // Hide sub steps for small devices.
  &__sub-step {
    display: none;
  }

  // Show sub steps for medium and above devices.
  @media #{$medium-up} {
    &__sub-step {
      display: -ms-flexbox;      /* TWEENER - IE 10 */
      display: flex;
      -ms-flex: auto;              /* IE 10 */
      flex: auto;
      list-style: none;
      margin: 0;
      padding: 0;
    }
  }

  // Force final step to have no bar and collapse width. 
  &__step:last-of-type {
    -ms-flex: none;              /* IE 10 */
    flex: none;
  }

  &__step-marker {
    display: block;
    position: relative;
    text-align: center;
    width: 1.875rem;
  }

  // Make all steps smaller for mobile devices.
  &__step-number{
    background-color: $progression-step-bg;
    border-radius: 50%;
    color: $progression-text;
    display: block;
    height: 1.875rem;
    line-height: 1.875rem;
    position: relative;
    text-align: center;
    width: 1.875rem;
  }

  // Hide labels for small devices.
  &__step-label {
    display: none;
  }

  // Large steps for medium and above devices and show labels.
  @media #{$medium-up} {
    &__step-marker {
      width: 2.5rem;
    }
    &__step-number {
      background-color: $progression-step-bg;
      border-radius: 50%;
      color: $progression-text;
      display: block;
      height: 2.5rem;
      line-height: 2.5rem;
      position: relative;
      text-align: center; 
      width: 2.5rem;
    }

    &__step-label {
      color: $progression-label;
      display: block;
      line-height: 1.2;
      position: relative;
      margin: .125rem -1.5625rem 0;
      text-align: center;
    }
  }

  &__link {
    text-decoration: none;
  }

  &__bar {
    background-color: $progression-bar-bg;
    border-right: 1px solid $progression-border;
    border-left: 1px solid $progression-border;
    display: -ms-flexbox;      /* TWEENER - IE 10 */
    display: flex;
    -ms-flex: 1;              /* IE 10 */
    flex: 1;
    height: .625rem;
    margin: .625rem 0;
  }

  @media #{$medium-up} {
    &__bar {
      margin: .9375rem 0;
    }
  }

  &__bar &__link {
    display: inline-block;
    height: .625rem;
    width: 100%;
  }

  // Completed state and links
  &__step &__link:hover, 
  &__link:hover &__step-number {
    background-color: darken($progression-step-bg, 10%);
    text-decoration: none;
  }

  .is-complete &__step-number, 
  .is-complete &__link &__step-number, 
  .is-complete &__bar  {
    background-color: $progression-completed;
    color: $progression-text;
  }

  .is-complete &__step &__link:hover, 
  .is-complete &__link:hover &__step-number {
    background-color: darken($progression-completed, 10%);
    text-decoration: none;
  }

  // Allows nesting of sub-steps within parent step.
  &__bar &__bar {
    background-color: $progression-bar-bg;
    margin: 0;
  }

  &__bar .is-complete  {
    background-color:  $progression-completed;
    color: $progression-text;
  }

  &__bar .is-complete &__link:hover {
    background-color: darken($progression-completed, 10%);
    text-decoration: none;
  }

}

// Graceful degradation of code for IE 8 and IE 9. 
.lte-ie9 .progression, .lte-ie8 .progression {
  float:left;

  &__step {
    float:left;
    margin-right: 10px;
  }

  &__sub-step {
    display: none;
  }

  &__step-number {
    float:left;
  }

  &__bar {
    display: none;
  }
}